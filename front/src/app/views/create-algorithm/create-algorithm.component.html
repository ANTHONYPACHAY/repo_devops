<div class="col-12 pr-8 pl-8 sm:pl-0 sm:pr-0 md:pl-8 md:pr-8 lg:pl-8 lg:pr-8 xl:pl-8 xl:pr-8  ">
    <p-panel header="Gestionar Scripts">

        <div class="p-fluid p-formgrid p-grid formgrid grid mb-n2">
            <div class="p-field field col-12 sm:col-12 md:col-12 lg:col-12 xl:col-12">
                <label for="titulo" class="mb-2">Título:</label>
                <input type="text" pInputText id="titulo" class="mb-2" [(ngModel)]="scriptsItem.tittle" required
                       autofocus/>
            </div>

            <div class="p-field field col-12 sm:col-12 md:col-12 lg:col-12 xl:col-12">
                <label for="txtobservacion" class="mr-2 "><b>Descripción:</b></label>
                <textarea name="txtobservacion" id="txtobservacion" rows="3" cols="30" pInputTextarea
                          [(ngModel)]="scriptsItem.description"></textarea>
            </div>

            <div class="p-field field col-12 sm:col-12 md:col-6 lg:col-6 xl:col-6">
                <label for="scriptType" class="mr-2 "><b>Tipo de Script:</b></label>
                <!--        optionValue="id"-->
                <p-dropdown id="scriptType" [options]="scriptTypeList" placeholder=" -- -- "
                            scrollHeight="40vh" [filter]="true"
                            filterBy="description"
                            [panelStyle]="{ 'width': '100%', 'overflow-x': 'auto' }"
                            optionLabel="description" [(ngModel)]="scriptsItem.scriptType.id"
                            optionValue="id"
                >
                    <ng-template let-option pTemplate="item">
                            <span
                                [ngClass]="'custom-primeng-combito'">{{ option.description }}</span>
                    </ng-template>
                </p-dropdown>
            </div>

            <div class="p-field field col-12 sm:col-12 md:col-6 lg:col-6 xl:col-6">
                <label for="operativeSystem" class="mr-2 "><b>Sistema Operativo:</b></label>
                <!--        optionValue="id"-->
                <p-dropdown id="operativeSystem" [options]="operativeSystemList" placeholder=" -- -- "
                            scrollHeight="40vh" [filter]="true"
                            filterBy="description"
                            [panelStyle]="{ 'width': '100%', 'overflow-x': 'auto' }"
                            optionLabel="description" [(ngModel)]="scriptsItem.operativeSystem.id"
                            optionValue="id"
                >
                    <ng-template let-option pTemplate="item">
                            <span
                                [ngClass]="'custom-primeng-combito'">{{ option.description }}</span>
                    </ng-template>
                </p-dropdown>
            </div>
            <div class="p-field field col-12 sm:col-12 md:col-6 lg:col-6 xl:col-6">
                <label for="tool" class="mr-2 "><b>Herramienta de Automatización:</b></label>
                <p-dropdown id="tool" [options]="toolList" placeholder=" -- -- "
                            scrollHeight="40vh" [filter]="true"
                            filterBy="description"
                            [panelStyle]="{ 'width': '100%', 'overflow-x': 'auto' }"
                            optionLabel="description" [(ngModel)]="scriptsItem.tool.id"
                            optionValue="id"
                >
                    <ng-template let-option pTemplate="item">
                            <span
                                [ngClass]="'custom-primeng-combito'">{{ option.description }}</span>
                    </ng-template>
                </p-dropdown>
            </div>

            <!--            <div class="col-sm-12 col-md-12 col-xl-12 p-field" *ngIf="tipoVista === tipeEmul.VIDEO">-->
            <!--                <label for="url" class="mb-2">Enlace del video:</label>-->
            <!--                <input type="text" pInputText id="url" class="mb-2" [(ngModel)]="selectedItem.recurso_url" required/>-->
            <!--            </div>-->
            <div class="p-field field col-12 sm:col-12 md:col-12 lg:col-12 xl:col-12">
                <label  class="mr-2 "><b>Tecnologías:</b></label>
                <p-table #dt [value]="tecnologiasList" [paginator]="false" styleClass="p-datatable-sm mt-2"
                         [rowHover]="true" dataKey="id" sortField="description" sortMode="single"
                         currentPageReportTemplate="mostrando {first} a {last} de {totalRecords} registros"
                         [showCurrentPageReport]="true" [(selection)]="tecnologiasListSelected" >
                    <!--    <ng-template pTemplate="caption">-->
                    <!--      -->
                    <!--    </ng-template>-->
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 3rem">
                            </th>
                            <th>Tecnología</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item  let-rowIndex="rowIndex">
                        <tr>
                            <td >
                                <p-tableCheckbox [value]="item"  ></p-tableCheckbox>
                            </td>
                            <td>{{ rowIndex + 1 + '.- ' + item.description }}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
            <div class="p-field field col-12 sm:col-12 md:col-6 lg:col-6 xl:col-6">
                <label for="pdf" class="block text-900 font-medium  mb-2">Archivos:</label>
                <p-fileUpload id="pdf" mode="advanced" chooseIcon="pi-search"
                              [maxFileSize]="1000000" (onSelect)="onFileSelect($event)"
                              multiple="true"
                              label="Buscar" chooseLabel="Buscar"
                              class="mr-2 inline-block">

                </p-fileUpload>
            </div>
            <div class="p-field field col-12 sm:col-12 md:col-6 lg:col-6 xl:col-6">
                <label  class="mr-2 "><b>Autores:</b></label>
                <p-table #dt [value]="scriptsItem.authors" [paginator]="false" styleClass="p-datatable-sm mt-2"
                         [rowHover]="true" dataKey="id" sortField="description" sortMode="single"
                         currentPageReportTemplate="mostrando {first} a {last} de {totalRecords} registros"
                         [showCurrentPageReport]="true"  >
                    <!--    <ng-template pTemplate="caption">-->
                    <!--      -->
                    <!--    </ng-template>-->
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 3rem"> </th>
                            <th>Nombres</th>
                            <th>Email</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item  let-rowIndex="rowIndex">
                        <tr>
                            <td><p-avatar [label]="item?.entity?.firstName[0] ??'U'" size="large"></p-avatar></td>
                            <td>{{ item?.entity?.firstName + ' ' + item?.entity?.lastName }}</td>
                            <td>{{ item?.entity?.email }}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>

            <div class="p-field field col-12 sm:col-12 md:col-6 lg:col-6 xl:col-6">
                <label  class="mr-2 "><b>Archivos:</b></label>
                <p-table #dt [value]="scriptsItem.fileData" [paginator]="false" styleClass="p-datatable-sm mt-2"
                         [rowHover]="true" dataKey="name" sortField="name" sortMode="single"
                         currentPageReportTemplate="mostrando {first} a {last} de {totalRecords} registros"
                         [showCurrentPageReport]="true"  >
                    <!--    <ng-template pTemplate="caption">-->
                    <!--      -->
                    <!--    </ng-template>-->
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 3rem"> # </th>
                            <th>Nombre de Archivo</th>
                            <th>Acción</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-item  let-rowIndex="rowIndex">
                        <tr>
                            <td>{{rowIndex + 1}}</td>
                            <td>{{ item?.name }}</td>
                            <td>
                                <a [href]="item.url" download>
                                    <button pButton type="button" label="Download" icon="pi pi-download"></button>
                                </a>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
            <div class="p-field field col-12 sm:col-12 md:col-12 lg:col-12 xl:col-12">
                <div class="flex justify-content-end mt-2 ">
                    <div class="formgroup-inline ">
                        <p-button (click)="cancel()" icon="pi pi-times" label="Cancelar"
                                  styleClass="p-button-warning"></p-button>
                        <p-button (click)="saveItem()" icon="pi pi-save" label="Guardar"
                                  styleClass="p-button-success"
                                  [style]="{'margin-left':'10px'}"
                        ></p-button>
                    </div>
                </div>
            </div>


        </div>
    </p-panel>
</div>


